# Database

## 信息与数据

### 信息

- 需要一定的形式表示，信息与其表现符号（数据）不可分离

### 数据

- 数据是描述事物的符号记录
- 数据的是信息的具体表现形式
- 数据是数据库中存储的基本对象
- 数据有多种表现形式
- 数据与其语义是不可分的

## 数据库（DB）

- 数据库是存储在计算机内、有组织的、可共享的大量数据集合
- 数据库不仅包括描述事物的数据本身，而且包括相关事物之间的联系

### 数据库系统内部的体系结构

1. 外模式（用户模式）：

   - 可有多个，数据库用户能够看到并允许使用的那部分局部数据的逻辑结构和特征的描述是概念模式的某一部分的抽象表示 
   - 外模式与应用的关系：一对多
     - 同一外模式可以为某一用户的多个应用系统所使用，但一个应用程序只能使用一个外模式

   - 模式与外模式的关系：一对多
     - 对模式中同一数据，在外模式中的结构、类型、长度、保密级别等都可以不同 

2. 模式（逻辑模式）：只有一个，数据库中全体数据的逻辑结构和特征的描述是整个数据库数据存储的抽象表示

3. 内模式（物理模式）：只有一个，它是对数据库存储结构的描述，是数据在数据库内部的表示方式是整个数据库实际存储的表示

### 数据库系统内部的二级映象

- DBMS 在三级模式之间提供了二级映象功能，保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性

1. 外模式/模式映象：保证了数据与程序间的逻辑独立性
2. 模式/内模式映象：确保了数据的物理独立性

#### 数据独立性

- 数据独立性是指应用程序和数据库的数据结构之间相互独立，不受影响
- 数据独立性分成数据的**物理独立性**和数据的**逻辑独立性**两个级别

- 数据的逻辑独立性
  - 数据的逻辑独立性指用户的应用程序与数据库的逻辑结构是相互独立的
  - 数据的逻辑结构改变了，用户的应用程序也可以不变
- 数据的物理独立性
  - 数据的物理独立性指用户的应用程序与数据库的物理结构是相互独立的
  - 数据的物理存储结构改变了，用户的应用程序不用改变

### 数据库系统的外部体系结构

1. 单用户结构的数据库系统：一台计算机，不能共享数据
2. 主从式结构的数据库系统：大型主机带多个终端；主机处理，终端输出
3. 分布式结构的数据库系统：分布在计算机网络上的多个逻辑相关的数据库的集合
4. 客户/服务器结构的数据库系统：把DBMS的功能与应用程序分开；管理数据的节点称为服务器，应用DBMS的节点称为客户机
5. 浏览器/服务器结构的数据库系统：将客户端运行的应用程序转移到应用服务器上，充当了客户机和数据库服务器的中介

## 数据库管理系统（DBMS）

- DBMS：数据的安全性控制、数据的完整性控制、并发控制、数据恢复
- DBMS在操作系统支持下工作，应用程序在DBMS支持下才能使用数据库
- 数据库管理系统是位于用户与操作系统之间的一层数据管理软件

### DBMS的主要功能

1. 数据定义功能（DDL）

  - 通过数据定义语言（DDL）来定义

  - 定义数据的模式、外模式、内模式三级模式结构

  - 定义模式/内模式和外模式/模式二级映象

  - 定义有关的约束条件

2. 数据操纵功能（DML）

   - 通过数据控制语言（DML）来实现对数据的基本操作

   - 数据库的基本操作：检索、更新、插入、修改、删除等

   - DML：自主型、宿主型

3. 数据库运行管理功能（DCL）

   - 通过数据库控制语言（DCL）来实现数据库恢复、数据库并发、数据库完整性控制、数据库安全性控制

   - 对数据库运行的管理是DBMS运行的核心部分

   - DBMS对数据库的控制主要通过四个方面实现：数据的安全性控制、数据的完整性控制、多用户环境下的并发控制和数据库的恢复

4. 数据库的建立和维护功能

   - 数据库的建立包括数据库的初始数据的装入与数据转换等

   - 数据库的维护包括数据库的转储、恢复、重组织与重构造、系统性能监视与分析等

5. 数据字典（DD）

   - 对数据库的操作都要通过数据字典（DD）才能实现，DD还存放数据库运行时的统计信息

6. 数据通信接口

7. 数据组织、存储和管理

### DBMS的组成

1. 语言编译处理程序
	- 数据定义语言DDL编译程序
	- 数据操纵语言DML编译程序
2. 系统运行控制程序
	- 系统总控程序
	- 安全性控制程序
	- 完整性控制程序
	- 并发控制程序
	- 数据存取和更新程序
	- 通信控制程序
3. 系统建立、维护程序
	- 装配程序
	- 重组程序
	- 系统恢复程序
4. 数据字典
	- 描述数据库中有关信息的数据目录

### DBMS的数据存取的过程

1. 用户使用某种特定的数据操作语言向DBMS发出存取请求
2. DBMS接受请求并将该请求解释转换成机器代码指令
3. DBMS依次检查外模式、外模式/模式印象、模式、模式/内模式映象及存储结构定义
4. DBMS对存储数据库执行必要的存取操作
5. 从对数据库的存取操作中接受结果
6. 对得到的结果进行必要的处理，如格式转换等
7. 将处理的结果返回给用户

### 数据管理技术发展的三个阶段

|      阶段      | 共享程度 |  冗余程度  |                 独立性                 |          结构化          |
| :------------: | :------: | :--------: | :------------------------------------: | :----------------------: |
|  人工管理阶段  |  无共享  | 冗余度极大 |                 不独立                 |          无结构          |
|  文件系统阶段  | 共享性差 |  冗余度大  | 独立性差，数据逻辑结构必须修改应用程序 | 记录内有结构，整体无结构 |
| 数据库系统阶段 | 共享性高 |  冗余度低  |              数据独立性高              |        整体结构化        |



## 数据模型

- 数据模型是数据库的框架
- 数据模型是数据库系统的核心和基础

### 数据模型的分类

#### 概念模型（E-R模型）

- 它是按用户的观点对数据和信息建模
- 用来描述某个特定组织所关心的信息结构
- 概念模型属于信息世界中的模型

#### 逻辑模型和物理模型

- 逻辑模型是属于计算机世界中的模型
- 逻辑模型主要包括层次模型、网状模型、关系模型、面向对象模型等
- 物理模型描述数据在磁盘或磁带上的存储方式和存取方式

### 数据模型的组成要素

#### 数据结构

**层次结构**

- 在根以外的其他结点有且仅有一个双亲结点
- 父子结点之间的联系是一对多的关系

- 优点
	- 结构简单，层次分明
	- 查询效率高
	- 提供良好的数据完整性支持

- 缺点
	- 不能直接表示多对多联系
	- 插入和删除数据限制太多
	- 查询子女结点必须通过双亲结点

**网状结构**

- 网状模型是采用有向图结构表示记录型与记录型之间联系的数据模型
- 每个结点表示一个记录型，每个记录型可包含若干个字段，记录型描述的是实体
- 结点间的带箭头的连线（或有向边）表示记录型间的1：n的父子联系
- 有一个以上的结点没有双亲结点
- 允许结点有多个双亲结点
- 允许两个结点之间有多种联系（复合联系）

- 优点
	- 可表示实体间的多种复杂联系
	- 具有良好的性能和存储效率

- 缺点
	- 数据结构复杂
	- 数据定义语言、数据操纵语言复杂
	- 用户需要了解系统结构的细节

**关系结构**

- 分量：每一行对应的列的属性值，即为元组中的一个属性值
- 关键字：可唯一标识一个元组的属性或属性集，也称为关系键或主码
- 关系模式：关系模式是对关系的描述，是关系模型的“型”
- 关系实例：关系实例是关系模式的“值”，是关系的数据，相当于二维表中的数据

- 优点
	- 有严格的数学理论根据
	- 用关系描述实体间的联系
	- 具有更高的数据独立性、更好的安全保密性

- 缺点
	- 查询效率不如非关系模型

**面向对象模型**

- 对象和对象标识
	- 对象是现实世界中实体的模型化
	- 对象标识独立于对象的内容和存储位置，是一种逻辑标识符，通常由系统产生，它在整个系统范围内是唯一的
	- 两个对象即使内部状态值和方法都相同，如标识符不同，仍认为是两个相等而不同的对象
	- 每个对象都包含一组属性和一组方法
- 类和继承
	- 具有同样属性和方法集的所有对象构成了一个对象类 ，一个对象是某一类的实例
	- 类的属性域可以是基本数据类型（如整型、实型、字符型等），也可以是类
	- 类的表示具有层次性和继承性

- 优点
	- 能完整地描述现实世界的数据结构
	- 具有丰富的表达能力

- 缺点
	- 模型相对比较复杂
	- 涉及的知识比较多

#### 数据的完整性约束和数据操作

- 数据操作为：查询 插入 删除 修改

- 数据的完整性约束有：正确 有效 相容

**层次结构**

- 进行插入操作时，如果没有相应的双亲结点值就不能插入子女结点值
- 进行删除操作时，如果删除双亲结点值，则相应的子女结点值也被同时删除
- 修改操作时，应修改所有相应的记录，以保证数据的一致性

**网状结构**

- 插入数据时，允许插入尚未确定双亲结点值的子女结点值
- 删除数据时，允许只删除双亲结点值
- 修改数据时，只需更新指定记录即可

**关系结构**

- 关系模型中的数据操作是集合操作，操作对象和操作结果都是关系，即若干元组的集合
- 关系模型把对数据的存取路径隐蔽起来，用户只要指出“干什么”，而不必详细说明“怎么干”，从而大大地提高了数据的独立性，提高了用户操作效率

## 三个世界

- 现实世界

	- 现实世界即客观存在的世界
	- 人们总是选用感兴趣的最能表征该事物的若干特征来描述该事物

- 信息世界

	- 实体
		- 客观存在并且可以相互区别的“事物”称为实体
		- 实体可以是具体的人、事、物，也可以是抽象的实体

	- 属性
		- 实体所具有的某一特征称为属性
		- 型 -> 属性名
		- 值 -> 具体值
		- 实体型
			- 具有相同属性的实体必然具有共同的特征
		- 实体集
			- 同型实体的集合称为实体集
		- 键
			- 能唯一标识一个实体的属性或属性集称为实体的键
		- 域
			- 属性的取值范围称为该属性的域
	- 联系
		- 实体型内部的联系通常是指组成实体的各属性之间的联系
		- 实体型之间的联系通常是指不同实体集之间的联系
		- 两个实体型之间的联系有如下三种类型：
			1. 一对一联系
			2. 一对多联系
			3. 多对多联系

- 计算机世界

	- 字段：标题实体属性的命名单位称为字段
	- 记录：字段的有序集合称为记录
	- 文件：同一类记录的集合称为文件
	- 关键字：能唯一标识文件中每个记录的字段或字段集称为记录的关键字

### 三个世界各术语的对应关系

|  现实世界  | 信息世界 | 计算机世界 |
| :--------: | :------: | :--------: |
|  事物总体  |  实体集  |    文件    |
|  事物个体  |   实体   |    记录    |
|    特征    |   属性   |    字段    |
| 事物间联系 | 实体模型 |  数据模型  |



### 三个世界的划分及其有关概念

1. 首先将现实世界的事物及其联系抽象成信息世界的信息模型
2. 然后再抽象成计算机世界的数据模型
3. 数据加工经历了现实世界、信息世界和计算机世界三个不同的世界，经历了两级抽象和转换

### 数据处理的抽象和转换过程

- 现实世界 -> 认识抽象 -> 概念模型（信息世界） -> DBMS支持的数据模型（计算机世界）

## 数据库系统（DBS）

- 数据库系统阶段：数据结构化，共享型高、冗余度低，独立性高，有统一的数据控制功能
- 数据库系统是指在计算机系统中引入数据库后的系统
- 数据库系统是由数据库、数据库管理系统（及开发工具）、应用系统和数据库管理构建

### 数据库系统的发展

#### 传统数据库：格式化数据模型，关系数据模型

- 缺点：
	1. 面向机器的语法数据模型
	2. 数据模型简单、固定
	3. 结构与行为完全分离
	4. 被动响应
	5. 事务处理能力较差

#### 格式化数据模型（层次数据模型和网状数据模型）（第一代）

1. 支持三级模式的体系结构
2. 用存取路径来表示数据之间的联系
3. 独立的数据定义语言
4. 导航的数据操纵语言

#### 关系型数据库（第二代）

1. 概念单一，实体以及实体之间的联系都用关系来表示
2. 以关系代数为基础，形式化基础好
3. 数据独立性强，数据的物理存取路径对用户隐蔽
4. 关系数据库语言是非过程化的，大大降低了用户编程的难度

#### 面向对象的数据模型（第三代）

1. 支持面向对象的数据模型
2. 保持或继承第二代数据库系统的优点
3. 具有开放性

#### 集中式数据库

- 集中式数据库就是集中在一个中心场地的电子计算机上，以统一处理方式所支持的数据库
- 集中控制处理效率高，可靠性好
- 数据冗余少，数据独立性高
- 易于支持复杂的物理结构去获得对数据的有效访问

#### 分布式数据库

- 分布式数据库是一组结构化的数据集合，它们在逻辑上属于同一系统而在物理上分布在计算机网络的不同结点上

##### 分布式数据库的特点

- 自治与共享
- 冗余的控制
- 分布事务执行的复杂性
- 数据的独立性
	- 逻辑数据透明性
	- 物理数据透明性
	- 数据分布透明性
	- 数据冗余透明性

#### 主动数据库

- 主动数据库的定义：在实际应用领域中，主动数据库系统在紧急情况下能够根据数据库的当前状态，主动、适时地作出反应，执行某些操作，向用户提供某些信息
- 主动数据库的实现：系统提供一个“自动监视”机构，它主动地不时地检查着这些规则中包含的各种事件是否已经发生，一旦某事件被发现，系统就主动触发执行相应的 If-Then 规则（或规则组）

#### 多媒体数据库

- 非格式化数据：文本、图形、声音、图像、视频
- 格式化数据：数字、字符
- 多媒体数据库系统能够有效实现对格式化和非格式化的多媒体数据进行存储、管理和操纵
- 多媒体数据库目前有三种结构：
	1. 由单独一个多媒体数据库管理系统来管理不同媒体的数据库以及对象空间
	2. 主辅 DBMS 体系结构
	3. 协作 DBMS 体系结构

### 数据库技术与其他相关技术的结合

- 数据库技术与分布式处理技术相结合，出现了分布式数据库
- 数据库技术与人工智能技术相结合，出现了演绎数据库、主动数据库和知识库等
- 数据库技术与多媒体技术相结合，出现了多媒体数据库

### 数据库技术的研究领域

- 数据库管理系统软件的研制：提高系统的性能和提高用户的生产率
- 数据库设计：在 DBMS 的支持下，按照应用的要求，为某一部门或组织设计一个结构合理、使用方便、效率较高的数据库及其应用系统
- 数据库理论：关系规范化理论、关系数据理论的研究

## 数据库设计

### 数据库设计的任务

- 数据库设计是指根据用户需求研制数据库结构的过程

### 数据库设计的内容

- 结构设计：概念设计、逻辑设计和物理设计
- 行为设计：应用程序的设计

### 数据库设计的特点

- 现代数据库的设计特点是强调结构设计与行为设计相结合，是一种“反复探寻，逐步求精”的过程

