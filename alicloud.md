# Ali CLoud

## 云计算
* 云计算的本质是分布式计算的一种；

## ECS
云服务器（Elastic Compute Service，简称ECS）是性能卓越、稳定可靠、弹性扩展的IaaS（Infrastructure as a Service）级别云计算服务；

### 优势

* 无需自建机房，无需采购以及配置硬件设施；
* 分钟级交付，快速部署，缩短应用上线周期；
* 快速接入部署在全球范围内的数据中心和BGP机房；
* 成本透明，按需使用，支持根据业务波动随时扩展和释放资源；
* 提供GPU和FPGA等异构计算服务器、弹性裸金属服务器以及通用的x86架构服务器；
* 支持通过内网访问其他阿里云服务，形成丰富的行业解决方案，降低公网流量成本；
* 提供虚拟防火墙、角色权限控制、内网隔离、防病毒攻击及流量监控等多重安全方案；
* 提供性能监控框架和主动运维体系；
* 提供行业通用标准API，提高易用性和适用性；



### 组件
* 实例：等同于一台虚拟服务器，内含CPU、内存、操作系统、网络配置、磁盘等基础的计算组件；实例的计算性能、内存性能和适用业务场景由实例规格决定，其具体性能指标包括实例vCPU核数、内存大小、网络性能等；
* 镜像：提供实例的操作系统、初始化应用数据及预装的软件；操作系统支持多种Linux发行版和多种Windows Server版本；
* 块存储：块设备类型产品，具备高性能和低时延的特性；提供基于分布式存储架构的云盘以及基于物理机本地存储的本地盘；
* 快照：某一时间点一块云盘的数据状态文件；常用于数据备份、数据恢复和制作自定义镜像等；
* 安全组：由同一地域内具有相同保护需求并相互信任的实例组成，是一种虚拟防火墙，用于设置实例的网络访问控制；
* 专有网络（Virtual Private Cloud）：逻辑上彻底隔离的云上私有网络；您可以自行分配私网IP地址范围、配置路由表和网关等；
* 经典网络：所有经典网络类型实例都建立在一个共用的基础网络上；由阿里云统一规划和管理网络配置；

### 实例

* 实例规格：根据业务场景，ECS实例可以分为多个规格族，同一个规格族里，根据vCPU和内存的配置，可以分为多种不同的规格；不同实例规格具有不同的vCPU和内存等配置，包括物理CPU型号、主频等；某些软件或应用对实例规格的配置有要求，例如，运行Windows Server镜像要求实例规格不能低于512MiB内存；其中，一个vCPU表示一个线程，一个物理CPU上可以运行多个线程；

* 系统存储：一台ECS实例必须包含一块系统盘，用来存储操作系统和核心配置；镜像主要用于初始化系统盘，决定ECS实例的操作系统和初始软件配置；但系统盘一般容量较小，如果您需要更多的存储选型或者空间，可以增加数据盘；

* 网络类型：ECS实例区分网络类型，支持经典网络和专有网络VPC，推荐使用VPC；实例在相同的网络中，例如同一个VPC，可以使用私网IP地址通过内网通信；如果实例需要与公网通信，可以获取公网IP地址与互联网上的设备通信；

### 镜像

* ECS镜像提供了创建ECS实例所需的信息；创建ECS实例时，必须选择镜像；镜像文件相当于副本文件，该副本文件包含了一块或多块云盘中的所有数据，对于ECS而言，这些云盘可以是单块系统盘，也可以是系统盘加数据盘的组合；

### 块存储

* 读写稳定性：在同一可用区中，您的业务数据以多副本的形式分布存储在块存储集群中，保证读写过程中的数据稳定性，为ECS实例实现99.9999999%的数据可靠性保证；详情请参见云盘三副本技术；

* 主动备份：您可以定期创建快照，提高业务数据的安全性；快照是阿里云备份产品，为云盘提供数据备份能力，确保日志和客户交易等信息有备份可查询；详情请参见快照概述；

* 数据擦除机制：您删除的数据不会被其他用户通过任何途径访问，分布式块存储系统中已删除的数据一定会被完全擦除；

* 数据加密
对于数据敏感型应用，建议您加密存储设备；ECS云盘加密采用行业标准的AES-256算法，利用密钥加密云盘以及云盘快照；从ECS实例传输到云盘的数据会被自动加密，并在读取数据时自动解密；

### 快照

* 容灾备份：为云盘创建快照，再使用快照创建云盘获取基础数据，实现同城容灾和异地容灾；
* 环境复制：使用系统盘快照创建自定义镜像，再使用自定义镜像创建ECS实例，实现环境复制；
* 数据开发：为数据挖掘、报表查询和开发测试等应用提供近实时的真实生产数据；


### 安全组

* 一台ECS实例至少属于一个安全组，可以同时加入多个安全组，上限为5个；
* 一个安全组可以管理同一个地域内的多台ECS实例，这些实例要求具有相同安全保护需求并相互信任；
* 在没有设置允许访问的安全组规则的情况下，不同安全组内的ECS实例默认内网不通；
* 同一安全组内的ECS实例之间可以实现内网互通；
* （仅普通安全组）可以通过安全组规则授权两个安全组之间互访；
* 安全组支持有状态应用；一个有状态的会话连接中，会话的最长保持时间是910秒；安全组会默认放行同一会话中的通信；例如，在会话期内，如果连接的数据包在入方向是允许的，则在出方向也是允许的；

### 网络

* 专用网络：专有网络（Virtual Private Cloud，简称VPC）是您基于阿里云构建的一个隔离的网络环境，专有网络之间逻辑上彻底隔离；您可以自定义这个专有网络的拓扑和IP地址，适用于对网络安全性要求较高和有一定网络管理能力的用户；

* 经典网络：经典网络类型的云产品，统一部署在阿里云公共基础设施内，规划和管理由阿里云负责，更适合对网络易用性要求比较高的用户

## RDS

目前最大支持内存48G，硬盘1000G；

### RDS系列

* 基础版：一般用于个人学习或开发测试，采用单节点部署，性价比高，可用性不高，适用于相对不重要的场景；

* 高可用版：采用一主一备的高可用架构，采用binlog的数据复制技术维护数据库的可用性和数据一致；

* 集群版：基于SQL Server源生AlwaysOn技术，实现计算与存储分离，并且可以通过独立购买只读实例实现读写分离，同时每个只读实例默认也有独立的内网连接；

* 三节点企业版：主要应用于金融、证券、保险等行业的核心数据库，数据安全性可用性要求非常高，采用一主两备用架构，通过binlog日志多副本多级别复制，确保数据的强一致性，可提供金融级的数据可靠性和跨机房容灾能力；

### 实例规格

共同点：都是在一台物理服务器上划分多个资源隔离的区域，为不同用户提供mysql数据库实例；

* 共享型/通用型：对于cpu和存储空间采用了复用的技术，部署在用一台服务器上的所有myslq实例会共享cpu和存储；通用型的cpu资源是轻度复用，共享型的cpu资源是高度复用；

* 独享型：多个数据库实例共享一台物理服务器，会获得最好的性能，价格最贵；

### 只读实例

* 分担数据库压力，增加应用的吞吐量；
* 在对数据库有少量写请求，但有大量的读请求的应用场景下，单个实例可能无法抵抗读取压力，甚至对主业务产生影响；为了实现读取能力的弹性扩展，分担数据库压力，RDS支持在某个地域中创建一个或多个只读实例，利用只读实例满足大量的数据库读取需求，以此增加应用的吞吐量；

### 灾备实例

* RDS通过数据传输服务实现主实例和异地灾备实例的实时同步；主实例和灾备实例均可搭建主备高可用架构，当主实例所在区域发生突发性自然灾害等状况，主节点和备节点均无法连接时，可将异地灾备实例切换为主实例，在应用端修改数据库链接地址后，即可快速恢复应用的业务访问；

## 临时实例

* 临时增加读写能力；

### 基础架构特点

* 高可用控制系统主要负责所有数据库实例主备之间的健康检查以及实时切换，以保证数据库高可用性达到99.99%；

* 3秒轮循一次，实例轮询并发进行，当发现有节点不健康时，需要完成秒级切换；

* 高可用控制系统是作为第三方身份去判断数据库实力是否在正常运行，不会出现脑裂现象；

* 高可用系统集群本身也是一个高可用的环境，集群内所有节点相互检查和任务接管；

* 可以支持20000个用户实例监控，HA节点在5秒内完成切换；

### 功能

* 专业的数据库管理平台：DMS不仅仅是为RDS定制的数据库管理平台，还可以使用户通过浏览器即可安全、方便的进行数据库管理和维护；

* 轻松的数据回溯：RDS能够根据备份文件将数据库恢复至7日内任意时刻；

* 专业的数据库优化建议：提供直观的慢SQL分析报告和完整的SQL运行报告，并提供如主键检查、索引检查等多种优化建议；

* 完善的监控体系：RDS展示近20种性能资源监控视图，可对部分资源项设置阀值报警，并提供WEB操作、SQL审计等多种日志；

## SLB

### 介绍

* 负载均衡，英文名称为 Load Balance ，其意思就是分摊到多个操作单元上进行执行， 例如 Web 服务器、 FTP 服务器、企业关键应用服务器和其它关键任务服务器等，从而共同完成工作任务；

* SLB 不支持跨地域（ Region ）部署，一个 SLB 实例后端的多台 ECS 必须处于同一地域
（ Region ）才可以配置；

* 负载均衡 建立在现有网络结构之上，它提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性；

* SLB 支持用户在服务监听配置中根据您实际的业务情况来配置 SLB 前端和ECS后端的端口映射规则端口的输入范围：1-65535。每个用户最多个60SLB实例，每个SLB实例最多支持50个服务监听配置规则，每个服务监听配置前端端口号不得重复，前\后端必须采用同一协议进行通信，目前支持7层（HTTPs协议）和4层（TCP/UDP协议）;



### 作用

*  SLB服务通过设置虚拟服务地址（IP），将位于同一地域（Region）的多台云服务器（Elastic Compute Service，简称ECS）资源虚拟成一个高性能、高可用的应用服务池；根据应用指定的方式，将来自客户端的网络请求分发到云服务器池中；

* SLB服务会检查云服务器池中ECS的健康状态，自动隔离异常状态的ECS，从而解决了单台ECS的单点问题，同时提高了应用的整体服务能力；

* 在标准的负载均衡功能之外，SLB服务还具备TCP与HTTP抗DDoS攻击的特性，增强了应用服务器的防护能力；

* SLB服务是ECS面向多机方案的一个配套服务，需要同ESC结合使用；

### 核心概念

* 负载均衡实例 （Server Load Balancer instances）一个负载均衡实例是一个运行的负载均衡服务，用来接收流量并将其分配给后端服务器；

* 要使用负载均衡服务，您必须创建一个负载均衡实例，并至少添加一个监听和两台ECS 实例；

* 监听 （Listeners）监听用来检查客户端请求并将请求转发给后端服务器，一个SLB实例最多支持50个服务监听配置；

### 整体结构

* SLB 系统由 3 部分构成：四层负载均衡，七层负载均衡 和 控制系统；
* 四层负载均衡：采用开源软件 LVS （ linux virtual server ）进行定制化，适用于后端服务器的应用采用 TCP 协议的负载均衡；
* 七层负载均衡：采用开源软件 Tengine，适用于后端服务器的应用采用HTTP协议或者HTTPS协议的负载均衡;
* 控制系统：用于配置和监控负载均衡系统；

### 功能

* 当前提供 4 层（TCP/UDP协议）和 7 层（HTTP/HTTPS协议）的负载均衡服务；
* 可以对后端 ECS 进行健康检查，自动屏蔽异常状态的 ECS ，待该ECS 恢复正常后自动解除屏蔽；
* 提供会话保持功能，在Session的生命周期内，可以将同一客户端请求转发到同一台后端ECS上；
* 支持加权轮询（WRR），加权最小连接数（WLC）转发方式，后端ECS权重越高，被分发的几率也越大：WRR的方式将外部请求依序分发到后端ECS上；WLC的方式将外部请求分发到当前连接数最小的后端ECS上；
* 支持针对监听来分配其对应服务所能达到的带宽峰值；
* 可以支持公网或私网类型的负载均衡服务；
* 提供丰富的监控数据，实时了解 SLB 运行状态；
* 结合云盾，提供WAF及防DDOS攻击能力，包括 CC,SYN FLOOD 等；
* 支持同一地域（REGION）跨数据中心容灾，结合DNS还可以支持跨REGION容灾；
* 针对HTTPS协议，提供统一的证书管理服务，证书无需上传后端ECS ，解密处理在SLB上进行，降低后端ECS，CPU开销；
* 提供控制台，API，SDK多种管理方式；

### 后端服务器

* 后端服务器：添加的每一个ECS实例，都是一个后端服务器。默认后端服务器是在实例维度上维护的，即负载均衡实例下的所有监听都只能够将流量转发到相同服务器组的相同端口上；

* 主备服务器：当有传统的主备需求时，即后端服务器中有一台主机和一台备机。当主机工作正常时，流量将直接走主机；当主机宕机时，流量将走到备机，可以使用主备服务器组，避免服务中断；主备服务器是在监听维度上维护的，并且只支持绑定到四层监听，即负载均衡实例下的不同四层监听可将流量转发到不同服务器组的不同端口上；

* 虚拟后端服务器组：虚拟服务器组允许您在监听维度上个性化定义服务器组，即实例下的不同监听可使用不同的后端服务器组，可满足域名和URL转发个性化需求；如果创建了虚拟服务器组，并将虚拟服务器组和监听进行了关联，那么后端添加的独立的ECS实例不会再接收请求；

### SLB证书

* 为了支持 HTTPS 功能， SLB 提供证书管理功能。用户可以将证书存储到 SLB 证书管理系统，而不需要将证书直接部署到后端 SERVER 上；

* SLB 证书管理是分REGION的，即一个证书如果要在多个REGION使用，那么上传证书时就需要选择多个REGION目前仅支持 PEM 格式的证书，每个用户最多可以创建 100 个证书；

## OSS

* OSS是一种面向互联网的分布式存储服务，用户可以通过SDK、API或者Web页面在任何应用、任务时间、任何地点上传和下载数据；

### 功能
* 弹性扩展：海量的存储空间，随用户使用量的增加，空间弹性增长；
* 大规模：能支持同时间内高并发、大流量的读写访问；
* 图片处理：对存储在OSS上的图片，支持缩略、裁剪、水印、压缩和格式转换等图片处理功能；
* 按需付费：对存储空间、网络流量、请求次数，按照用户实际使用量进行计费，节省用户的成本；

### 特点
* 稳定：服务可用性高达99.9%，系统规模自动扩展，对外服务不受影响，数据三重备份，可靠性达到99.99999999%；
* 安全：多层次安全防护和防DDoS攻击，多用户隔离机制，提供访问日志有助于追查非法访问；
* 大规模高性能：存储容量无限扩展，请求处理能力弹性增加，多线BGP网络确保全国各地访问流畅；

### 基本概念

#### Object
* 用户的每个文件都是一个Object；
* 文件大小限制；Put Object方式最大不能超过5GB, 使用multipart上传方式Object大小不能超过48.8TB；
* Object包含key、data和meta data；

#### Bucket
* 每个Object必须都包含在Bucket中；
* Bucket名在整个OSS中具有全局唯一性，且不能修改；
* 一个用户最多可创建10个Bucket；
* 每个Bucket中存放的Object的数量和大小总和没有限制；
* 一个应用可以对应一个或多个Bucket；

#### Service
* 提供给用户的虚拟存储空间， 用户可以在这个存储空间中拥有一个或者多个Bucket；

#### Access ID & Access Key
* Access ID & Access Key （API密钥）;

### 操作
* Object：文件
* Bucket：主目录
* Region/Endpoint/AccessKey
* SetService：获取主目录列表
* GetBucket：获取文件列表
* PutObject：写入文件
* AppendObject：追加内容
* GetObject：读取文件
* DeleteObject：删除文件
* CopyObject：复制文件

### Bucket存储类型
* 标准存储类型：各种社交、分享类的图片、音视频应用、大型网站、大数据分析的合适选择；
* 低频访问存储类型：适合长期保存不经常访问的数据，存储单价低于标准类型，适合各类移动应用、智能设备、企业数据的长期备份；入到可读取状态需要等待数小时的解冻时间；适合需要长期保存的档案数据、医疗影像、科学资料、影视素材；"></a>
* 归档存储类型：适合需要长期保存（建议半年以上）的归档数据，在存储周期内极少被访问，数据进入到可读取状态需要等待数小时的解冻时间；适合需要长期保存的档案数据、医疗影像、科学资料、影视素材；
```
--------------------------------------------------------------
|对比指标     |标准存储类型    |低频访问存储类型|归档存储类型    |
--------------------------------------------------------------
|数据可靠性   |99.99999999%   |99.99999999%   |99.99999999%   |
|服务可用性   |99.95%         |99.9%          |99.9%          |
|最小计量大小 |按照实际大小计算 |64KB           |64KB           |
|最少存储时间 |无最短存储实际要求|30天          |60天          |
|数据获取费用 |不收取数据获取费用|按获取的数据收取|按获取的数据收取| // 单位GB
|数据访问特点 |实时访问ms延迟  |实时访问ms延迟  |数据需要先解冻   | // 解冻时间1-4小时
|图片处理     |支持           |支持            |不支持         |
```

### Bucket和数据中心
* Bucket一旦创建完成后，就不可以修改所属的数据中心；
* OSS 只支持Bucket级别的数据中心设置，不支持针对Object设置数据中心；
* Bucket所在的数据中心确定后，该Bucket下的所有Object将一直存放在该数据中心，除非用户自己将它们搬迁到其它数据中心；

### Bucket操作
* 每个bucket的名字全局唯一，bucket的名字需要符合命名规范；
* 用户成功创建bucket以后，不能修改bucket名字，不能更改bucket所属数据中心；
* 目前bucket有三种访问权限：public-read-write，public-read和private；
* 为了防止误删，OSS不允许用户删除一个非空的bucket在删除之前，必须保证bucket内没有任何的碎片以及object；

### 访问
* 域名构成：bucketname.endpoint；
* 只有使用ECS实例用户才能够通过OSS内网地址进行访问；
* 使用内网只能访问与ECS实例所在区域相同的bucket，而如果访问的bucket与ECS实例不在同一个区域，只能使用bucket所在区域的公网域名；
* OSS域名绑定（CNAME）功能目前仅支持OSS以三级域名访问方式进行绑定；
* 如您的OSS Bucket未绑定域名，您通过浏览器访问文件URL，则强制携带content-disposition头为强制下载模式；
* 每个Bucket可以绑定20个域名；
* 您绑定的域名需在完成备案；
